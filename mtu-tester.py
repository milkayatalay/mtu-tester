#!/usr/bin/env python3

import socket
import sys


def main(MESSAGE):
    if len(sys.argv) == 4:
        ip = sys.argv[1]
        port = int(sys.argv[2])
        messagesize = int(sys.argv[3])
    elif len(sys.argv) == 3:
        ip = sys.argv[1]
        port = int(sys.argv[2])
        messagesize = 19167
        print("\nContinue with maximum message size (19167 byte)\n")
    elif sys.argv[1]=="--help":
        print("\nA tool for testing MTU capabilities on networks.\n\nRun like : \n\nmtu-tester.py <arg1:server ip:192.168.1.6> <arg2:server port:4444 > <arg3: message size:4500>")
        exit(1)
    else:
        print("Run like : \n\nmtu-tester.py <arg1:server ip:192.168.1.6> <arg2:server port:4444 > <arg3: message size:4500>")
        exit(1)



    sock = socket.socket(socket.AF_INET,socket.SOCK_DGRAM) 
    print("\"CTRL+c for exit \"")
    

    while 1:
        x=input("\n Type \"change\" for changing message size or press \"ENTER\" for sending message:")
        if x=="change":
            messagesize=int(input("Enter new message size:"))
            
            if messagesize!=19167:
                messageForSending=MESSAGE[0:(messagesize-44)]
        else:
            if messagesize!=19167:
                messageForSending=MESSAGE[0:(messagesize-44)]

        print("\nUDP target IP: %s" % ip)
        print("UDP target port: %s" % port)
        print("Message size : %d" % messagesize)

        sock.sendto(messageForSending, (ip, port))




MESSAGE = b"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla molestie sem sit amet massa molestie bibendum. Donec quam libero, porta id hendrerit ut, congue vel ligula. Donec fermentum aliquet metus vel tempor. Pellentesque varius vulputate dolor, consectetur congue sem bibendum sit amet. Duis pulvinar turpis ipsum, sit amet pretium lorem varius eleifend. Etiam quis tempus ante. Donec efficitur est et odio euismod interdum. Fusce ac pellentesque velit. Nunc pharetra laoreet varius. Mauris molestie ligula at ex gravida faucibus. Donec vitae aliquet ex. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.Integer non tellus non turpis posuere fringilla non at eros. Suspendisse in nibh varius tellus porta convallis sit amet non nisl. Proin laoreet ipsum sit amet nunc placerat aliquam. Nam gravida nec ante consectetur ullamcorper. Ut consequat neque vel nunc lacinia, ut placerat enim sollicitudin. Sed congue imperdiet pellentesque. Nunc dapibus pulvinar sem, nec blandit sem semper quis. Pellentesque iaculis quis magna vitae placerat. Donec mollis semper tortor id venenatis. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Integer non purus lectus.Nunc mattis a elit euismod mattis. Vestibulum pellentesque nec est ut consectetur. Sed massa metus, interdum quis feugiat a, egestas eget ipsum. Suspendisse ultrices, leo ultricies tristique ultricies, metus mi bibendum leo, rutrum gravida diam arcu a erat. Maecenas vitae sagittis quam. Pellentesque lacinia nulla orci, in aliquam ante efficitur eu. Donec tempus eget sem non posuere. Nullam fringilla, eros a vehicula posuere, dolor nibh efficitur neque, ut finibus augue mi et neque. Aliquam quis turpis ac tortor accumsan dignissim. Fusce at lacus dolor. Phasellus ut placerat est. Sed fringilla nibh ut tincidunt dignissim. Vivamus nisl nisi, auctor nec ipsum vitae, ullamcorper iaculis sapien. Donec elit est, vestibulum eu sollicitudin sit amet, blandit id diam.Aliquam eu scelerisque ipsum, at rhoncus odio. Donec sed lobortis tortor. Nullam lacinia, erat ac vestibulum commodo, massa dui pretium enim, vitae iaculis lectus turpis id mi. Sed gravida tincidunt nibh, eget porttitor nisi rhoncus vehicula. Praesent vitae enim a justo ullamcorper convallis. Phasellus at rutrum ex, at porta nunc. Praesent ac finibus dui. Donec volutpat ornare ante id ultrices. Nullam feugiat, tortor id ultrices iaculis, urna lacus efficitur sapien, vel elementum risus eros sit amet nisl. Morbi cursus tempus libero, ac tincidunt felis tempus ac. Duis tristique a purus in finibus.Ut tristique ante ut sollicitudin pulvinar. Fusce sed sagittis orci. Suspendisse tortor ex, pharetra vitae nulla vitae, fermentum lacinia metus. Nam at vehicula ex. Curabitur eu mauris in lorem commodo sagittis. Integer scelerisque leo arcu, aliquam auctor neque malesuada vitae. Etiam nec pharetra ante. Fusce ornare leo est. Sed vulputate nec turpis vel tempor. In in mi pulvinar, rutrum ex id, lobortis risus. Pellentesque dapibus nunc rutrum nisl tempor, tempus consequat quam viverra. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla molestie sem sit amet massa molestie bibendum. Donec quam libero, porta id hendrerit ut, congue vel ligula. Donec fermentum aliquet metus vel tempor. Pellentesque varius vulputate dolor, consectetur congue sem bibendum sit amet. Duis pulvinar turpis ipsum, sit amet pretium lorem varius eleifend. Etiam quis tempus ante. Donec efficitur est et odio euismod interdum. Fusce ac pellentesque velit. Nunc pharetra laoreet varius. Mauris molestie ligula at ex gravida faucibus. Donec vitae aliquet ex. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.Integer non tellus non turpis posuere fringilla non at eros. Suspendisse in nibh varius tellus porta convallis sit amet non nisl. Proin laoreet ipsum sit amet nunc placerat aliquam. Nam gravida nec ante consectetur ullamcorper. Ut consequat neque vel nunc lacinia, ut placerat enim sollicitudin. Sed congue imperdiet pellentesque. Nunc dapibus pulvinar sem, nec blandit sem semper quis. Pellentesque iaculis quis magna vitae placerat. Donec mollis semper tortor id venenatis. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Integer non purus lectus.Nunc mattis a elit euismod mattis. Vestibulum pellentesque nec est ut consectetur. Sed massa metus, interdum quis feugiat a, egestas eget ipsum. Suspendisse ultrices, leo ultricies tristique ultricies, metus mi bibendum leo, rutrum gravida diam arcu a erat. Maecenas vitae sagittis quam. Pellentesque lacinia nulla orci, in aliquam ante efficitur eu. Donec tempus eget sem non posuere. Nullam fringilla, eros a vehicula posuere, dolor nibh efficitur neque, ut finibus augue mi et neque. Aliquam quis turpis ac tortor accumsan dignissim. Fusce at lacus dolor. Phasellus ut placerat est. Sed fringilla nibh ut tincidunt dignissim. Vivamus nisl nisi, auctor nec ipsum vitae, ullamcorper iaculis sapien. Donec elit est, vestibulum eu sollicitudin sit amet, blandit id diam.Aliquam eu scelerisque ipsum, at rhoncus odio. Donec sed lobortis tortor. Nullam lacinia, erat ac vestibulum commodo, massa dui pretium enim, vitae iaculis lectus turpis id mi. Sed gravida tincidunt nibh, eget porttitor nisi rhoncus vehicula. Praesent vitae enim a justo ullamcorper convallis. Phasellus at rutrum ex, at porta nunc. Praesent ac finibus dui. Donec volutpat ornare ante id ultrices. Nullam feugiat, tortor id ultrices iaculis, urna lacus efficitur sapien, vel elementum risus eros sit amet nisl. Morbi cursus tempus libero, ac tincidunt felis tempus ac. Duis tristique a purus in finibus.Ut tristique ante ut sollicitudin pulvinar. Fusce sed sagittis orci. Suspendisse tortor ex, pharetra vitae nulla vitae, fermentum lacinia metus. Nam at vehicula ex. Curabitur eu mauris in lorem commodo sagittis. Integer scelerisque leo arcu, aliquam auctor neque malesuada vitae. Etiam nec pharetra ante. Fusce ornare leo est. Sed vulputate nec turpis vel tempor. In in mi pulvinar, rutrum ex id, lobortis risus. Pellentesque dapibus nunc rutrum nisl tempor, tempus consequat quam viverra. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla molestie sem sit amet massa molestie bibendum. Donec quam libero, porta id hendrerit ut, congue vel ligula. Donec fermentum aliquet metus vel tempor. Pellentesque varius vulputate dolor, consectetur congue sem bibendum sit amet. Duis pulvinar turpis ipsum, sit amet pretium lorem varius eleifend. Etiam quis tempus ante. Donec efficitur est et odio euismod interdum. Fusce ac pellentesque velit. Nunc pharetra laoreet varius. Mauris molestie ligula at ex gravida faucibus. Donec vitae aliquet ex. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.Integer non tellus non turpis posuere fringilla non at eros. Suspendisse in nibh varius tellus porta convallis sit amet non nisl. Proin laoreet ipsum sit amet nunc placerat aliquam. Nam gravida nec ante consectetur ullamcorper. Ut consequat neque vel nunc lacinia, ut placerat enim sollicitudin. Sed congue imperdiet pellentesque. Nunc dapibus pulvinar sem, nec blandit sem semper quis. Pellentesque iaculis quis magna vitae placerat. Donec mollis semper tortor id venenatis. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Integer non purus lectus.Nunc mattis a elit euismod mattis. Vestibulum pellentesque nec est ut consectetur. Sed massa metus, interdum quis feugiat a, egestas eget ipsum. Suspendisse ultrices, leo ultricies tristique ultricies, metus mi bibendum leo, rutrum gravida diam arcu a erat. Maecenas vitae sagittis quam. Pellentesque lacinia nulla orci, in aliquam ante efficitur eu. Donec tempus eget sem non posuere. Nullam fringilla, eros a vehicula posuere, dolor nibh efficitur neque, ut finibus augue mi et neque. Aliquam quis turpis ac tortor accumsan dignissim. Fusce at lacus dolor. Phasellus ut placerat est. Sed fringilla nibh ut tincidunt dignissim. Vivamus nisl nisi, auctor nec ipsum vitae, ullamcorper iaculis sapien. Donec elit est, vestibulum eu sollicitudin sit amet, blandit id diam.Aliquam eu scelerisque ipsum, at rhoncus odio. Donec sed lobortis tortor. Nullam lacinia, erat ac vestibulum commodo, massa dui pretium enim, vitae iaculis lectus turpis id mi. Sed gravida tincidunt nibh, eget porttitor nisi rhoncus vehicula. Praesent vitae enim a justo ullamcorper convallis. Phasellus at rutrum ex, at porta nunc. Praesent ac finibus dui. Donec volutpat ornare ante id ultrices. Nullam feugiat, tortor id ultrices iaculis, urna lacus efficitur sapien, vel elementum risus eros sit amet nisl. Morbi cursus tempus libero, ac tincidunt felis tempus ac. Duis tristique a purus in finibus.Ut tristique ante ut sollicitudin pulvinar. Fusce sed sagittis orci. Suspendisse tortor ex, pharetra vitae nulla vitae, fermentum lacinia metus. Nam at vehicula ex. Curabitur eu mauris in lorem commodo sagittis. Integer scelerisque leo arcu, aliquam auctor neque malesuada vitae. Etiam nec pharetra ante. Fusce ornare leo est. Sed vulputate nec turpis vel tempor. In in mi pulvinar, rutrum ex id, lobortis risus. Pellentesque dapibus nunc rutrum nisl tempor, tempus consequat quam viverra. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla molestie sem sit amet massa molestie bibendum. Donec quam libero, porta id hendrerit ut, congue vel ligula. Donec fermentum aliquet metus vel tempor. Pellentesque varius vulputate dolor, consectetur congue sem bibendum sit amet. Duis pulvinar turpis ipsum, sit amet pretium lorem varius eleifend. Etiam quis tempus ante. Donec efficitur est et odio euismod interdum. Fusce ac pellentesque velit. Nunc pharetra laoreet varius. Mauris molestie ligula at ex gravida faucibus. Donec vitae aliquet ex. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.Integer non tellus non turpis posuere fringilla non at eros. Suspendisse in nibh varius tellus porta convallis sit amet non nisl. Proin laoreet ipsum sit amet nunc placerat aliquam. Nam gravida nec ante consectetur ullamcorper. Ut consequat neque vel nunc lacinia, ut placerat enim sollicitudin. Sed congue imperdiet pellentesque. Nunc dapibus pulvinar sem, nec blandit sem semper quis. Pellentesque iaculis quis magna vitae placerat. Donec mollis semper tortor id venenatis. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Integer non purus lectus.Nunc mattis a elit euismod mattis. Vestibulum pellentesque nec est ut consectetur. Sed massa metus, interdum quis feugiat a, egestas eget ipsum. Suspendisse ultrices, leo ultricies tristique ultricies, metus mi bibendum leo, rutrum gravida diam arcu a erat. Maecenas vitae sagittis quam. Pellentesque lacinia nulla orci, in aliquam ante efficitur eu. Donec tempus eget sem non posuere. Nullam fringilla, eros a vehicula posuere, dolor nibh efficitur neque, ut finibus augue mi et neque. Aliquam quis turpis ac tortor accumsan dignissim. Fusce at lacus dolor. Phasellus ut placerat est. Sed fringilla nibh ut tincidunt dignissim. Vivamus nisl nisi, auctor nec ipsum vitae, ullamcorper iaculis sapien. Donec elit est, vestibulum eu sollicitudin sit amet, blandit id diam.Aliquam eu scelerisque ipsum, at rhoncus odio. Donec sed lobortis tortor. Nullam lacinia, erat ac vestibulum commodo, massa dui pretium enim, vitae iaculis lectus turpis id mi. Sed gravida tincidunt nibh, eget porttitor nisi rhoncus vehicula. Praesent vitae enim a justo ullamcorper convallis. Phasellus at rutrum ex, at porta nunc. Praesent ac finibus dui. Donec volutpat ornare ante id ultrices. Nullam feugiat, tortor id ultrices iaculis, urna lacus efficitur sapien, vel elementum risus eros sit amet nisl. Morbi cursus tempus libero, ac tincidunt felis tempus ac. Duis tristique a purus in finibus.Ut tristique ante ut sollicitudin pulvinar. Fusce sed sagittis orci. Suspendisse tortor ex, pharetra vitae nulla vitae, fermentum lacinia metus. Nam at vehicula ex. Curabitur eu mauris in lorem commodo sagittis. Integer scelerisque leo arcu, aliquam auctor neque malesuada vitae. Etiam nec pharetra ante. Fusce ornare leo est. Sed vulputate nec turpis vel tempor. In in mi pulvinar, rutrum ex id, lobortis risus. Pellentesque dapibus nunc rutrum nisl tempor, tempus consequat quam viverra. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla molestie sem sit amet massa molestie bibendum. Donec quam libero, porta id hendrerit ut, congue vel ligula. Donec fermentum aliquet metus vel tempor. Pellentesque varius vulputate dolor, consectetur congue sem bibendum sit amet. Duis pulvinar turpis ipsum, sit amet pretium lorem varius eleifend. Etiam quis tempus ante. Donec efficitur est et odio euismod interdum. Fusce ac pellentesque velit. Nunc pharetra laoreet varius. Mauris molestie ligula at ex gravida faucibus. Donec vitae aliquet ex. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.Integer non tellus non turpis posuere fringilla non at eros. Suspendisse in nibh varius tellus porta convallis sit amet non nisl. Proin laoreet ipsum sit amet nunc placerat aliquam. Nam gravida nec ante consectetur ullamcorper. Ut consequat neque vel nunc lacinia, ut placerat enim sollicitudin. Sed congue imperdiet pellentesque. Nunc dapibus pulvinar sem, nec blandit sem semper quis. Pellentesque iaculis quis magna vitae placerat. Donec mollis semper tortor id venenatis. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Integer non purus lectus.Nunc mattis a elit euismod mattis. Vestibulum pellentesque nec est ut consectetur. Sed massa metus, interdum quis feugiat a, egestas eget ipsum. Suspendisse ultrices, leo ultricies tristique ultricies, metus mi bibendum leo, rutrum gravida diam arcu a erat. Maecenas vitae sagittis quam. Pellentesque lacinia nulla orci, in aliquam ante efficitur eu. Donec tempus eget sem non posuere. Nullam fringilla, eros a vehicula posuere, dolor nibh efficitur neque, ut finibus augue mi et neque. Aliquam quis turpis ac tortor accumsan dignissim. Fusce at lacus dolor. Phasellus ut placerat est. Sed fringilla nibh ut tincidunt dignissim. Vivamus nisl nisi, auctor nec ipsum vitae, ullamcorper iaculis sapien. Donec elit est, vestibulum eu sollicitudin sit amet, blandit id diam.Aliquam eu scelerisque ipsum, at rhoncus odio. Donec sed lobortis tortor. Nullam lacinia, erat ac vestibulum commodo, massa dui pretium enim, vitae iaculis lectus turpis id mi. Sed gravida tincidunt nibh, eget porttitor nisi rhoncus vehicula. Praesent vitae enim a justo ullamcorper convallis. Phasellus at rutrum ex, at porta nunc. Praesent ac finibus dui. Donec volutpat ornare ante id ultrices. Nullam feugiat, tortor id ultrices iaculis, urna lacus efficitur sapien, vel elementum risus eros sit amet nisl. Morbi cursus tempus libero, ac tincidunt felis tempus ac. Duis tristique a purus in finibus.Ut tristique ante ut sollicitudin pulvinar. Fusce sed sagittis orci. Suspendisse tortor ex, pharetra vitae nulla vitae, fermentum lacinia metus. Nam at vehicula ex. Curabitur eu mauris in lorem commodo sagittis. Integer scelerisque leo arcu, aliquam auctor neque malesuada vitae. Etiam nec pharetra ante. Fusce ornare leo est. Sed vulputate nec turpis vel tempor. In in mi pulvinar, rutrum ex id, lobortis risus. Pellentesque dapibus nunc rutrum nisl tempor, tempus consequat quam viverra. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla molestie sem sit amet massa molestie bibendum. Donec quam libero, porta id hendrerit ut, congue vel ligula. Donec fermentum aliquet metus vel tempor. Pellentesque varius vulputate dolor, consectetur congue sem bibendum sit amet. Duis pulvinar turpis ipsum, sit amet pretium lorem varius eleifend. Etiam quis tempus ante. Donec efficitur est et odio euismod interdum. Fusce ac pellentesque velit. Nunc pharetra laoreet varius. Mauris molestie ligula at ex gravida faucibus. Donec vitae aliquet ex. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.Integer non tellus non turpis posuere fringilla non at eros. Suspendisse in nibh varius tellus porta convallis sit amet non nisl. Proin laoreet ipsum sit amet nunc placerat aliquam. Nam gravida nec ante consectetur ullamcorper. Ut consequat neque vel nunc lacinia, ut placerat enim sollicitudin. Sed congue imperdiet pellentesque. Nunc dapibus pulvinar sem, nec blandit sem semper quis. Pellentesque iaculis quis magna vitae placerat. Donec mollis semper tortor id venenatis. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Integer non purus lectus.Nunc mattis a elit euismod mattis. Vestibulum pellentesque nec est ut consectetur. Sed massa metus, interdum quis feugiat a, egestas eget ipsum. Suspendisse ultrices, leo ultricies tristique ultricies, metus mi bibendum leo, rutrum gravida diam arcu a erat. Maecenas vitae sagittis quam. Pellentesque lacinia nulla orci, in aliquam ante efficitur eu. Donec tempus eget sem non posuere. Nullam fringilla, eros a vehicula posuere, dolor nibh efficitur neque, ut finibus augue mi et neque. Aliquam quis turpis ac tortor accumsan dignissim. Fusce at lacus dolor. Phasellus ut placerat est. Sed fringilla nibh ut tincidunt dignissim. Vivamus nisl nisi, auctor nec ipsum vitae, ullamcorper iaculis sapien. Donec elit est, vestibulum eu sollicitudin sit amet, blandit id diam.Aliquam eu scelerisque ipsum, at rhoncus odio. Donec sed lobortis tortor. Nullam lacinia, erat ac vestibulum commodo, massa dui pretium enim, vitae iaculis lectus turpis id mi. Sed gravida tincidunt nibh, eget porttitor nisi rhoncus vehicula. Praesent vitae enim a justo ullamcorper convallis. Phasellus at rutrum ex, at porta nunc. Praesent ac finibus dui. Donec volutpat ornare ante id ultrices. Nullam feugiat, tortor id ultrices iaculis, urna lacus efficitur sapien, vel elementum risus eros sit amet nisl. Morbi cursus tempus libero, ac tincidunt felis tempus ac. Duis tristique a purus in finibus.Ut tristique ante ut sollicitudin pulvinar. Fusce sed sagittis orci. Suspendisse tortor ex, pharetra vitae nulla vitae, fermentum lacinia metus. Nam at vehicula ex. Curabitur eu mauris in lorem commodo sagittis. Integer scelerisque leo arcu, aliquam auctor neque malesuada vitae. Etiam nec pharetra ante. Fusce ornare leo est. Sed vulputate nec turpis vel tempor. In in mi pulvinar, rutrum ex id, lobortis risus. Pellentesque dapibus nunc rutrum nisl tempor, tempus consequat quam viverra. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. "



if __name__ == '__main__':
    main(MESSAGE)